vals=find(xrf.(scan1).(element).('arr')>1.5);

xrf.(scan1).(element).('arr')(vals)=0;

dim=length(xrf.(scan1).(element).('map'));

dataset=reshape(xrf.(scan1).(element).('arr'),[dim, dim]);figure;

surface(xrf.(scan1).rel_X(:,1:scanpoints),xrf.(scan1).rel_Y(:,1:scanpoints),dataset(:,1:scanpoints), 'LineStyle', 'none')

colormap hot

title('XBIV Map','fontsize',fontsize);

xlabel('X position (µm)','fontsize', fontsize);

ylabel('Y position (µm)','fontsize', fontsize);

set(gca,'fontsize',fontsize,'fontweight','demi')

z= colorbar;

ylabel(z, 'XBIV [µV]', 'fontsize', fontsize);

axis square

axis([0 scansize 0 scansize])

caxis([min(min(xrf.(scan1).(element).map(:,1:scanpoints))) 1.5])