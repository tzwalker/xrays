I have a python list containing a few dictionaries.

`STACK= [{layer_0}, {layer_1}, {layer_2}, {layer_3}]`

I want to write a function for loop that iterates over the list STACK, accessing specific key:value pairs from all 'layers' *prior* to the item chosen by the for loop. The following code hopefully gives an idea of what I'm trying to accomplish:

`
def get_previous_layers(layer):
    list_of_prev_layers = list(STACK[:chosen_layer])
    return list_of_prev_layers
`
`
for layer in STACK:
    prev_layers = get_previous_layers(layer) #return list containing dictionaries of previous layers
    coefficients = []
    for prev_layer in prev_layers:
        coefficient = np.exp(- prev_layer["capXsect"] * 
                       prev_layer["density"] * 
                       prev_layer["thickness"] / detector_geometry)
        coefficients.append(coefficient)
    key = "external_prev_layer_coefficients"
    layer.setdefault(key, coefficient)
`

The reason I chose this approach is because the order of the dictionary items matters; information in `layer_0` needs to be used in the `for` loop operation on `layer_1`, information in `layer_0` and `layer_1` need to be used in the operation of `layer_2`, and so on. What I'm trying to get at kind of looks like this:



`
for chosen_layer in STACK:
    external_layers = find_prev_layers(layer) #make list of all previous (dictionary) layers
    for ext_lay in external_layers:
        compound = ext_lay["Compound"]      #extract relevant dictionary information
        chosen_layer["Element"
`


However, i get the following error after attempting something like this:

`TypeError: slice indices must be integers or None or have an __index__ method`

I'm thinking this means `layer` in this `for` loop is not an index, but rather a dictionary object, which cannot be used to slice the list `STACK`. Note that the dictionaries in `STACK` do not have any sort of explicit index value within them already.

After searching around, I'm thinking the solution probably involves some combination of the `enumerate` function and list comprehension. `enumerate` would help me attach indices to each of the items in `DICT`, and list comprehension may help me reference all items previous to a chosen `layer` dictionary. This combination eludes me and I was hoping to hear the community's suggestions!

Look forward to hearing them, and much thanks. 